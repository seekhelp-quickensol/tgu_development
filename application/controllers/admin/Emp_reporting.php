<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); class Emp_reporting extends CI_Controller {	public function __construct(){		parent::__construct();		$this->is_logged(); 		$this->load->model('admin/Emp_reporting_model');	}	public function is_logged(){		if($this->session->userdata('admin_id') == ""){			redirect('erp-access');		}	}	public function validate_hidden_access(){		$this->form_validation->set_rules('password','password','required');		if($this->form_validation->run() === FALSE){			$this->load->view('admin/validate_hidden_access');		}else{			if($this->input->post('password') == "ABZB"){				$session = array(					'blended_validated' => '1'				);				$this->session->set_userdata($session);				$this->session->set_flashdata('success','Password validated successfully!');			}else{				$this->session->set_flashdata('message','Please enter valid password!');			}			redirect('validate_hidden_access');		}	}	public function create_my_report(){		$this->form_validation->set_rules('title','title','required');		if($this->form_validation->run() === FALSE){			$data['report'] = $this->Emp_reporting_model->get_my_reporting();			$data['single'] = $this->Emp_reporting_model->get_single_reporting_emp();			$this->load->view('admin/create_my_report',$data);		}else{			$fileName = ""; 			if($_FILES['userfile']['name'][0] != ""){ 				$fileName = $this->Digitalocean_model->upload_photo_multiple($filename="userfile",$path="emp_reporting/");			}			$this->Emp_reporting_model->set_my_reporting($fileName);			$this->session->set_flashdata('success','Report submitted successfully!');			redirect('create_my_report');		}	}	public function view_emp_reports_today(){		$this->form_validation->set_rules('report_status','report status','required');		if($this->form_validation->run() === FALSE){			$data['report'] = $this->Emp_reporting_model->get_today_reporting();			$this->load->view('admin/view_emp_reports_today',$data);		}else{			$this->Emp_reporting_model->set_update_reporting();			$this->session->set_flashdata('success','Report updated successfully!');			redirect('view_emp_reports_today');		}	}	public function view_emp_reports_all(){		$this->form_validation->set_rules('report_status','report status','required');		if($this->form_validation->run() === FALSE){			$data['report'] = $this->Emp_reporting_model->get_all_reporting();			$this->load->view('admin/view_emp_reports_today',$data);		}else{ 			$this->Emp_reporting_model->set_update_reporting();			$this->session->set_flashdata('success','Report updated successfully!');			redirect('view_emp_reports_all');		}	}	public function view_emp_report(){		$this->form_validation->set_rules('report_status','report status','required');		if($this->form_validation->run() === FALSE){			$data['report'] = $this->Emp_reporting_model->get_single_reporting_emp();			$this->load->view('admin/view_emp_report',$data);		}else{ 			$this->Emp_reporting_model->set_update_reporting();			$this->session->set_flashdata('success','Report updated successfully!');			redirect('view_emp_reports_all');		}	}	public function search_global_student(){		$this->form_validation->set_rules('enrollment_number','enrollment number','required');		if($this->form_validation->run() === FALSE){			$this->load->view('admin/search_global_student');		}else{ 			$this->Emp_reporting_model->check_global_search();			$this->session->set_flashdata('message','Please enter correct enrollment number!');			redirect('search_global_student');		}	}	public function search_global_blended_student(){		$this->form_validation->set_rules('enrollment_number','enrollment number','required');		if($this->form_validation->run() === FALSE){			$this->load->view('admin/search_global_student');		}else{ 			$this->Emp_reporting_model->check_global_blended_search();			$this->session->set_flashdata('message','Please enter correct enrollment number!');			redirect('search_global_blended_student');		}	}	public function search_student_payment(){		$data['details'] = $this->Emp_reporting_model->get_transaction_details();		$this->load->view('admin/search_student_payment',$data);	}}