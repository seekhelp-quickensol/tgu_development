<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); class News_model extends CI_Model { 	public function set_marquee_news($file){		if($file == ""){			$file = $this->input->post('old_file');		}		$data = array(			'news' 		=> $this->input->post('news'),			'file' 		=> $file,			'is_new' 	=> $this->input->post('is_new'),		);		if($this->input->post('id')==""){			$date = array(				'created_on' => date("Y-m-d H:i:s")			);			$new_arr = array_merge($data,$date);			$this->db->insert('tbl_marquee_news',$new_arr);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_marquee_news',$data);			return 1;		}	}	public function get_single_marquee_news(){		$this->db->where('id',$this->uri->segment(2));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_marquee_news');		return $result->row();	}	public function get_all_marquee_news_ajax($length,$start,$search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('news',$search);			$this->db->group_end();		}		$this->db->order_by('is_new','ASC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_marquee_news');		return $result->result();			}	public function get_all_marquee_news_count($search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('news',$search);			$this->db->group_end();		}		$result = $this->db->get('tbl_marquee_news');		return $result->num_rows();	}	public function set_news($file){		// if($file == ""){		// 	$file = $this->input->post('old_file');		// }		$file ='';		if($_FILES['photo']['name'] !=""){			$file = $this->Digitalocean_model->upload_photo($filename="photo",$path="uploads/news/");		}		$data = array(			'news_type' => $this->input->post('news_type'),			'heading' 	=> $this->input->post('heading'),			'date' 		=> date("Y-m-d",strtotime($this->input->post('date'))),			'news' 		=> strip_tags($this->input->post('content')),			'long_news' => $this->input->post('long_content'),			'file' 		=> $file,		);		if($this->input->post('id')==""){			$date = array(				'created_on' => date("Y-m-d H:i:s")			);			$new_arr = array_merge($data,$date);			$this->db->insert('tbl_news',$new_arr);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_news',$data);			return 1;		} 	}	public function get_single_news(){		$result= null;		if (isset($_GET['id'])) {			$this->db->where('id',$_GET['id']);			$this->db->where('is_deleted','0');			$result = $this->db->get('tbl_news');			$result = $result->row();			if(!empty($result)){				$files = $this->Digitalocean_model->get_photo('uploads/news/'.$result->file);				$sub_array = "<img src=".$files.">";			}		}		return $result;	}	public function get_single_manage_news(){		$this->db->where('id', $this->uri->segment(2));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_news');		$result = $result->row();		if(!empty($result)){			$files = $this->Digitalocean_model->get_photo('uploads/news/'.$result->file);			$sub_array = "<img src=".$files.">";		}			return $result;	}		public function  get_all_news(){		$this->db->select('tbl_news.*');		$this->db->where('is_deleted','0');		$result=$this->db->get('tbl_news');		return $result ->result();		// $result=$result->result();		// echo"<pre>";print_r($result);exit;	}	public function  get_all_active_news(){		$this->db->select('tbl_news.*');		$this->db->where('is_deleted','0');		$this->db->where('status','1');		$result=$this->db->get('tbl_news');		return $result ->result();		// $result=$result->result();		// echo"<pre>";print_r($result);exit;	}	public function  get_all_blogs(){		$this->db->select('tbl_blogs.*');		$this->db->where('is_deleted','0');		$result=$this->db->get('tbl_blogs');		$result = $result ->result();		// if(!empty($result)){		// 	$files = $this->Digitalocean_model->get_photo('blogs/'.$result->file);		// 	$sub_array = "<img src=".$files.">";		// }		foreach ($result as &$blog) {			if (!empty($blog->file)) {				$blog->imagePath = $this->Digitalocean_model->get_photo('blog/' . $blog->file);			}		}		return $result;		// $result=$result->result();		// echo"<pre>";print_r($result);exit;	}	public function get_all_news_ajax($length,$start,$search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('heading',$search);			$this->db->group_end();		}		$this->db->order_by('id','DESC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_news');		return $result->result();		// $result = $result->result();		// echo "<pre>";print_r($result);exit;			}	public function set_blogs($file){		// if($file == ""){		// 	$file = $this->input->post('old_file');		// }		$file ='';		if($_FILES['photo']['name'] !=""){			$file = $this->Digitalocean_model->upload_photo($filename="photo",$path="blog/");		}		$data = array(			'heading' 			=> $this->input->post('heading'),			'link' 				=> $this->input->post('link'),			'date' 				=> date("Y-m-d",strtotime($this->input->post('date'))),			'blogs' 			=> $this->input->post('content'),			'long_blogs' 		=> $this->input->post('long_content'),			'file' 				=> $file,		);		if($this->input->post('id')==""){			$date = array(				'created_on' => date("Y-m-d H:i:s")			);			$new_arr = array_merge($data,$date);			$this->db->insert('tbl_blogs',$new_arr);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_blogs',$data);			return 1;		}	}	public function get_single_blogs(){		// $this->db->where('id',$this->uri->segment(2));		$result= null;		if (isset($_GET['id'])) {			$this->db->where('id',$_GET['id']);			$this->db->where('is_deleted','0');			$result = $this->db->get('tbl_blogs');			$result = $result->row();			if(!empty($result)){				$files = $this->Digitalocean_model->get_photo('blog/'.$result->file);				$sub_array = "<img src=".$files.">";			}		}		return $result;	}	public function get_single_manage_blogs(){		$this->db->where('id',$this->uri->segment(2));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_blogs');		$result = $result->row();		if(!empty($result)){			$files = $this->Digitalocean_model->get_photo('blog/'.$result->file);			$sub_array = "<img src=".$files.">";		}		return $result;	}	public function get_all_blogs_ajax($length,$start,$search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('heading',$search);			$this->db->group_end();		}		$this->db->order_by('id','DESC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_blogs');		return $result->result();			}	public function get_all_blogs_count($search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('heading',$search);			$this->db->group_end();		}		$result = $this->db->get('tbl_blogs');		return $result->num_rows();	}		public function get_all_image_ajax($length,$start,$search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('image_title',$search);			$this->db->group_end();		}		$this->db->order_by('id','DESC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_university_activity_image');		return $result->result();			}public function get_all_video_ajax($length,$start,$search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('video_tiltle',$search);			$this->db->group_end();		}		$this->db->order_by('id','DESC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_university_activity_video');		return $result->result();			}				public function get_all_news_count($search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('heading',$search);			$this->db->group_end();		}		$result = $this->db->get('tbl_news');		return $result->num_rows();	}	public function get_all_image_count($search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('image_title',$search);			$this->db->group_end();		}		$result = $this->db->get('tbl_university_activity_image');		return $result->num_rows();	}	public function get_all_video_count($search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('video_tiltle',$search);			$this->db->group_end();		}		$result = $this->db->get('tbl_university_activity_video');		return $result->num_rows();	}			public function set_conference($file){		if($file == ""){			$file = $this->input->post('old_file');		}		$data = array(			'heading' 	=> $this->input->post('heading'),			'date' 		=> date("Y-m-d",strtotime($this->input->post('date'))),			'description'=> $this->input->post('content'),			'file' 		=> $file,		);		if($this->input->post('id')==""){			$date = array(				'created_on' => date("Y-m-d H:i:s")			);			$new_arr = array_merge($data,$date);			$this->db->insert('tbl_conference',$new_arr);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_conference',$data);			return 1;		}	}	public function set_image($file){		if($file == ""){			$file = $this->input->post('old_file');		}		$data = array(			'image_title' => $this->input->post('title'),			'file' 		=> $file,		);		if($this->input->post('id')==""){			$date = array(				'created_on' => date("Y-m-d H:i:s")			);			$new_arr = array_merge($data,$date);			$this->db->insert('tbl_university_activity_image',$new_arr);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_university_activity_image',$data);			return 1;		}			}			public function set_video($file){		if($file == ""){			$file = $this->input->post('old_file');		}		$data = array(			'video_tiltle' => $this->input->post('title_video'),			'file' 		=> $file,		);		if($this->input->post('id')==""){			$date = array(				'created_on' => date("Y-m-d H:i:s")			);			$new_arr = array_merge($data,$date);			$this->db->insert('tbl_university_activity_video',$new_arr);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_university_activity_video',$data);			return 1;		}			}	public function get_single_activity_image(){		$this->db->where('id',$this->uri->segment(2));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_university_activity_image');		return $result->row();	}		public function get_single_activity_video(){		$this->db->where('id',$this->uri->segment(2));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_university_activity_video');		return $result->row();	}	public function get_single_conference(){		$this->db->where('id',$this->uri->segment(2));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_conference');		return $result->row();	}	public function get_all_conference_ajax($length,$start,$search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('heading',$search);			$this->db->group_end();		}		$this->db->order_by('id','DESC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_conference');		return $result->result();			}	public function get_all_conference_count($search){		$this->db->where('is_deleted','0');		if($search !=""){			$this->db->group_start();			$this->db->or_like('heading',$search);			$this->db->group_end();		}		$result = $this->db->get('tbl_conference');		return $result->num_rows();	}	} 