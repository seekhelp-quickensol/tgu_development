<?php include('header.php');?><style>	.btn-small{		padding: 5px 10px;	}	.no_doc{		margin-bottom: 0px;		padding: 5px;		background: #ddd;		color: #000;		text-align: center;	}</style>    <div class="container-fluid page-body-wrapper">      <div class="main-panel">        <div class="content-wrapper">          <div class="row">            <div class="col-md-12 grid-margin stretch-card">              <div class="card">                <div class="card-body">                  <h4 class="card-title">Teacher Assessment Form				  </h4>                  <?php if(!empty($single)){                    // echo "<pre>";print_r($single);exit;                        $local_data = $single;                        $hidden_id = $single->id;                        $student_id = $single->student_id;                        $assessor_name = $single->assessor_name;                        $assessor_signature = $single->assessor_signature;						$year_sem = $single->year_sem;                      }else if(!empty($center_student)) {                         $local_data = $center_student;                        $hidden_id = '';                        $student_id = $center_student->id;                        $assessor_name = '';						 $year_sem = $center_student->year_sem;                         $assessor_signature = '';                    } ?>				  <?php                    if(!empty($local_data)){                    // echo "<pre>";print_r($center_student);exit;                    ?>						<form class="forms-sample" name="exam_form" id="exam_form" method="post" enctype="multipart/form-data">							<div class="col-md-12">								<div class="row"> 									<div class="col-md-3">										<div class="form-group">											<label>Student Name <span class="req">*</span></label>											<input type="text" name="student_name" id="student_name" readonly class="form-control charector" placeholder="Student Full Name" value="<?php if(!empty($local_data)){ echo $local_data->student_name;}?>">                                            <input type="hidden" name="hidden_id" id="hidden_id" class="form-control" value="<?= $hidden_id; ?>">											<input type="hidden" name="student_id" id="student_id" class="form-control" value="<?= $student_id; ?>">											<input type="hidden" name="year_sem" id="year_sem" class="form-control" value="<?= $year_sem; ?>">                                        </div>									</div>									<div class="col-md-3">										<div class="form-group">											<label>Enrollment Number <span class="req">*</span></label>											<input type="text" name="enroll_number" id="enroll_number" readonly class="form-control charector" placeholder="Enrollment Number" value="<?php if(!empty($local_data)){ echo $local_data->enrollment_number;}?>">										</div>									</div>                                    <div class="col-md-3">										<div class="form-group">											<label>Course & Stream <span class="req">*</span></label>                                            <input type="text" name="course_stream" id="course_stream" readonly class="form-control " placeholder="Course & Stream" value="<?php if (!empty($local_data)) { echo $local_data->course_name . ' ' . '(' .$local_data->stream_name .')'; } ?>">                                            <input type="hidden" name="course" id="course" readonly class="form-control " value="<?php if (!empty($local_data)) { echo $local_data->course_id; } ?>">                                            <input type="hidden" name="stream" id="stream" readonly class="form-control " value="<?php if (!empty($local_data)) { echo $local_data->stream_id; } ?>">	                                            <input type="hidden" name="year_sem" id="year_sem" readonly class="form-control" value="<?=$year_sem?>">	                                        </div>									</div>                                    								</div>							</div> 							<div class="col-md-12"> 								<div class="row">                                     <div class="col-md-12">                                        <div class="row">                                            <div class="col-md-12">                                                <div class="form-group">                                                    <table class="table table-bordered" id="example">                                                        <thead>                                                            <tr>                                                                <th>SUBJECT(S) NAME</th>                                                                <th>ASSESSMENT OF KNOWLEDGE <br>(Grade between 1 to 10)</th>                                                                <th>ASSESSMENT OF APPLICATION OF KNOWLEDGE <br>(Grade between 1 to 10)</th>                                                            </tr>                                                        </thead>                                                        <tbody>                                                        <?php $i = 0;                                                          if(!empty($local_data) && !empty($student)){                                                             foreach($student as $student_result){                                                        ?>                                                            <tr id="removable_details_<?php echo $student_result->id;?>">                                                                <input type="hidden" value="<?=$i;?>" name="indices[]">                                                                <td>                                                                    <input type="text" name="subject_name_<?=$i;?>[]" id="subject_name_<?=$i;?>" class="form-control" value="<?php if(!empty($student_result)){ echo $student_result->subject_name;}?>">                                                                </td>                                                                <td>                                                                    <input type="text" name="assessment_knowledge_<?=$i;?>[]" id="assessment_knowledge_<?=$i;?>" class="form-control" value="<?php if(!empty($student_result)){ echo $student_result->assessment_knowledge;}?>">                                                                </td>                                                                <td>                                                                    <input type="text" name="assessment_application_<?=$i;?>[]" id="assessment_application_<?=$i;?>" class="form-control" value="<?php if(!empty($student_result)){ echo $student_result->assessment_application;}?>">                                                                </td>                                                                  <td class="form-group col-lg-1 ">                                                                    <span onclick="deleteRow(<?=$student_result->id;?>)" class="delete_area"><i class="fa fa-close" style="color:red;margin-top:35px;" aria-hidden="true"></i></span>                                                                </td>                                                                                                                       </tr>                                                            <?php $i++; }}else{ ?>                                                            <tr>                                                                <input type="hidden" value="<?=$i;?>" name="indices[]">                                                                <td>                                                                    <input type="text" name="subject_name_<?=$i;?>[]" id="subject_name_<?=$i;?>" class="form-control" value="">                                                                </td>                                                                <td>                                                                    <input type="text" name="assessment_knowledge_<?=$i;?>[]" id="assessment_knowledge_<?=$i;?>" class="form-control" value="">                                                                </td>                                                                <td>                                                                    <input type="text" name="assessment_application_<?=$i;?>[]" id="assessment_application_<?=$i;?>" class="form-control" value="">                                                                </td>                                                                                                                         </tr>                                                            <?php $i++;}?>                                                        </tbody>                                                        <tbody id="add_more_div"></tbody>                                                    </table>                                                    <div class="row">                                                        <div class="form-group col-lg-12">                                                            <a id="add_more_button" class="btn btn-primary mr-2" style="margin-top:30px;color:white;" onclick="createAddMoreFields()">Add More</a>                                                        </div>                                                    </div>                                                </div>                                            </div>                                        </div>                                    </div>                                    <div class="col-md-12"> 								        <div class="row">                                             <div class="col-md-3">                                                <div class="form-group">                                                    <label>Name of Assessor <span class="req">*</span></label>                                                    <input type="text" name="assessor_name" id="assessor_name" class="form-control charector" placeholder="Name of Assessor" value="<?= $assessor_name?>">                                                </div>                                            </div>                                            <div class="col-md-3">										        <div class="form-group">                                                    <label>Signature of Assessor <span class="req">*</span><?php if($assessor_signature != ""){?><a target="_blank" href="<?=$this->Digitalocean_model->get_photo('images/signature/'.$assessor_signature)?>">View</a><?php }?></label>                                                    <input type="file" class="form-control" name="signature" id="signature">											        <input type="hidden" class="form-control" name="old_signature" id="old_signature" value="<?=$assessor_signature?>">                                                </div>                                            </div>                                        </div>                                    </div>									<div class="col-md-12"> 										<div class="row">											<div class="col-md-12 edu">												<div class="form-group">													<label></label>													<button type="submit" class="btn btn-primary" name="register" id="register" value="Register">Submit</button>													<div class="pull-right"></div>												</div>											</div>											</div>									</div>									</div>							</div>						</form>                        <?php }else{ ?>                            <form method="post" name="verification_form" id="verification_form" enctype="multipart/form-data">                                <div class="row">                                     <div class="col-md-12">                                         <div class="personal_details">                                        </div>                                     </div>                                 </div>                                 <div class="row edu">                                     <div class="col-md-12">                                         <div class="form-group">                                             <label>Enter Your Enrollment Number<span class="req">*</span></label>                                             <input type="text" name="enrollment_number" id="enrollment_number" required class="form-control" placeholder="Enter Your Enrollment Number">                                         </div>                                     </div>                                 </div>                                  <div class="row">                                     <div class="col-md-12 edu">                                         <div class="form-group">                                             <label></label>                                             <button type="submit" class="btn btn-primary" name="generate" id="generate" value="Generate">Next</button>                                             <div class="pull-right">                                             </div>                                         </div>                                    </div>	                                </div>                             </form>				  <?php }?>                </div>              </div>            </div>                      </div>        </div>      <?php include('footer.php');$id=0;if($this->uri->segment(2) != ""){	$id = $this->uri->segment(2);}?><script>$.validator.addMethod("noHTMLtags", function(value, element) {    var htmlPattern = /<\/?[^>]+(>|$)/g;    return !htmlPattern.test(value);}, "HTML tags are not allowed!");$("#verification_form").validate({  	rules: { 		enrollment_number: { 			required: true, 			noHTMLtags: true, 		},	 	}, 	messages: { 		enrollment_number: { 			required: "Please enter enrollment number!", 			noHTMLtags:"HTML tags not allowed!", 		}, 	}, 	submitHandler: function(form){		form.submit();	} });</script><script>$("#exam_form").validate({     ignore: ":hidden:not(select)",	rules: {		student_name: {			required: true,			noHTMLtags: true,		},		study_mode: {			required: true,			noHTMLtags: true,		}, 	        assessor_name:{            required: true,			noHTMLtags: true,        },        <?php if (!empty($assessor_signature) && $assessor_signature == "") { ?>            old_signature :{                required: true,                noHTMLtags: true,            },        <?php }else if(empty($assessor_signature)){ ?>            old_signature :{                required: true,                noHTMLtags: true,            },        <?php } ?>	},	messages: {		student_name: {			required: "Please enter Full name!",			noHTMLtags: "HTML tags not allowed!",		},		study_mode: {			required: "Please select study mode!",			noHTMLtags: "HTML tags not allowed!",		},        assessor_name:{            required: "Please enter assessor name!",			noHTMLtags: "HTML tags not allowed!",        },        <?php if (!empty($assessor_signature) && $assessor_signature == "") { ?>            old_signature :{                required: "Please select signature!",                noHTMLtags: "HTML tags not allowed!",            },         <?php }else if(empty($assessor_signature)){ ?>            old_signature :{                required: "Please select signature!",                noHTMLtags: "HTML tags not allowed!",            },         <?php } ?>	}, 	submitHandler: function(form){		form.submit();	} });$('#study_mode').change(function () {    $('#study_mode').valid();});function deleteRow(id) {    if(confirm("Are you sure you want to delete this?")){         $.ajax({            type: "POST",            url: "<?=base_url();?>admin/Ajax_controller/remove_unused_setup_details",            data: {                'id': id,            },            success: function(data) {                    $("#removable_details_"+id).remove();                         },            error: function(jqXHR, textStatus, errorThrown) {                console.log(textStatus, errorThrown);            }        });    }}var i = <?php echo $i; ?>;function createAddMoreFields() {    let appedData = `<tr>                        <input type="hidden" value="${i}" name="indices[]">                        <td>                            <input type="text" name="subject_name_${i}[]" id="subject_name_${i}" class="form-control" value="">                        </td>                        <td>                            <input type="text" name="assessment_knowledge_${i}[]" id="assessment_knowledge_${i}" class="form-control" value="">                        </td>                        <td>                            <input type="text" name="assessment_application_${i}[]" id="assessment_application_${i}" class="form-control" value="">                        </td>                        <td>                            <span onclick="removeRow(this)" class="delete_area"><i class="fa fa-close" style="color:red;margin-top:35px;" aria-hidden="true"></i></span>                        </td>                    </tr>`;    $('#add_more_div').append(appedData);    i++;}function removeRow(arg) {    $(arg).parent().parent().remove();}    </script> 