<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); class Mail_link_model extends CI_Model { 	public function set_mail_link($file){ 		if($file ==""){			$file = $this->input->post('old_file_upload');		}		$data = array(			'name' 			=> $this->input->post('mail_name'),  			'expiry_date' 	=> date("Y-m-d",strtotime($this->input->post('expire_date'))), 			'content' 		=> $this->input->post('content'), 			'file' 			=> $file,  			'user_id' 		=> $this->session->userdata('admin_id'),		);		if($this->input->post('id') == ""){			$date = array( 				'created_on' 	=> date("Y-m-d H:i:s"),  			);			$new_arr = array_merge($data,$date);			$this->db->insert('tbl_mail_link',$new_arr);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_mail_link',$data);			return 1;		}	}	public function get_single_mail_link(){		$this->db->where('id',$this->uri->segment(2));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_mail_link');		return $result->row();	}	public function get_all_mail_link_ajax($length,$start,$search){		$this->db->select('tbl_mail_link.*');		$ids_arr = array('1','2','5','16');		if(!in_array($this->session->userdata('admin_id'),$ids_arr)){			$this->db->where('user_id',$this->session->userdata('admin_id'));		}		if($search !=""){			$this->db->group_start();			$this->db->or_like('tbl_mail_link.name',$search);			$this->db->or_like('tbl_mail_link.expiry_date',$search);  			$this->db->or_like('tbl_mail_link.content',$search);  			$this->db->group_end();		}		$this->db->where('tbl_mail_link.is_deleted','0'); 		$this->db->order_by('tbl_mail_link.id','DESC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_mail_link');		return $result->result();	}	public function get_all_mail_link_ajax_count($search){		$this->db->select('tbl_mail_link.*');		$ids_arr = array('1','2','5','16');		if(!in_array($this->session->userdata('admin_id'),$ids_arr)){			$this->db->where('user_id',$this->session->userdata('admin_id'));		}		if($search !=""){			$this->db->group_start();			$this->db->or_like('tbl_mail_link.name',$search);   			$this->db->or_like('tbl_mail_link.expiry_date',$search);  			$this->db->or_like('tbl_mail_link.content',$search);  			$this->db->group_end();		}		$this->db->where('tbl_mail_link.is_deleted','0'); 		$result = $this->db->get('tbl_mail_link');		return $result->num_rows();	}}