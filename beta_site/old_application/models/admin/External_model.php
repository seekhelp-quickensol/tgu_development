<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed'); class External_model extends CI_Model { 	public function set_verification_user(){		$data = array(			'name' 			=> $this->input->post('name'),			'email' 		=> $this->input->post('email'),			'mobile_number' => $this->input->post('mobile_number'), 			'alternate_number' => $this->input->post('alternate_number'), 			'address' 		=> $this->input->post('address'), 			'password' 		=> $this->input->post('password'),		);		if($this->input->post('id') == ""){			$date = array( 				'created_on'	=> date("Y-m-d H:i:s")			);			$new_data = array_merge($data,$date);			$this->db->insert('tbl_verification_user_login',$new_data);			return 0;		}else{			$this->db->where('id',$this->input->post('id'));			$this->db->update('tbl_verification_user_login',$data);			return 1;		}	}	public function get_student_qualification(){		$this->db->where('student_id',$this->uri->segment(2));		$result = $this->db->get('tbl_student_qualification');		$result = $result->row();		if(!empty($result)){			if($result->secondary_marksheet !=""){				$result->secondary_marksheet_path = $this->Digitalocean_model->get_photo('images/qualification/'.$result->secondary_marksheet);			}else{				$result->secondary_marksheet_path = "";			}			if($result->sr_secondary_marksheet !=""){				$result->sr_secondary_marksheet_path = $this->Digitalocean_model->get_photo('images/qualification/'.$result->sr_secondary_marksheet);			}else{				$result->sr_secondary_marksheet_path = "";			}			if($result->graduation_marksheet !=""){				$result->graduation_marksheet_path = $this->Digitalocean_model->get_photo('images/qualification/'.$result->graduation_marksheet);			}else{				$result->graduation_marksheet_path = "";			}			if($result->post_graduation_marksheet !=""){				$result->post_graduation_marksheet_path = $this->Digitalocean_model->get_photo('images/qualification/'.$result->post_graduation_marksheet);			}else{				$result->post_graduation_marksheet_path = "";			}			if($result->other_qualification_marksheet !=""){				$result->other_qualification_marksheet_path = $this->Digitalocean_model->get_photo('images/qualification/'.$result->other_qualification_marksheet);			}else{				$result->other_qualification_marksheet_path = "";			}		} 		return $result; 	}	public function get_emp_unique_email(){		if($this->input->post('id') !=""){			$this->db->where('id !=',$this->input->post('id'));		}		$this->db->where('email',$this->input->post('email'));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_verification_user_login');		echo $result->num_rows();	}	public function get_emp_unique_contact_number(){		if($this->input->post('id') !=""){			$this->db->where('id !=',$this->input->post('id'));		}		$this->db->where('mobile_number',$this->input->post('mobile_number'));		$this->db->where('is_deleted','0');		$result = $this->db->get('tbl_verification_user_login');		echo $result->num_rows();	}	public function get_all_verification_external_ajax($length,$start,$search){ 		$this->db->where('is_deleted','0'); 		if($search !=""){			$this->db->group_start();			$this->db->or_like('name',$search);			$this->db->or_like('email',$search);			$this->db->or_like('mobile_number',$search);			$this->db->or_like('alternate_number',$search);			$this->db->group_end();		} 		$this->db->order_by('id','ASC');		$this->db->limit($length,$start);		$result = $this->db->get('tbl_verification_user_login');		return $result->result();	}	public function get_all_verification_external_count($search){		$this->db->where('is_deleted','0'); 		if($search !=""){			$this->db->group_start();			$this->db->or_like('name',$search);			$this->db->or_like('email',$search);			$this->db->or_like('mobile_number',$search);			$this->db->or_like('alternate_number',$search);			$this->db->group_end();		} 		$this->db->order_by('id','ASC'); 		$result = $this->db->get('tbl_verification_user_login');		return $result->num_rows();	}	public function get_single_user(){		$this->db->where('is_deleted','0');		$this->db->where('id',$this->uri->segment(2));		$result = $this->db->get('tbl_verification_user_login');		return $result->row();	}	public function get_single_student(){		$this->db->select('tbl_student.*,tbl_course.print_name,tbl_stream.stream_name,tbl_session.session_name,countries.name as country_name,cities.name as city_name,states.name as state_name');		$this->db->where('tbl_student.id',$this->uri->segment(2));  		$this->db->join('tbl_course','tbl_course.id = tbl_student.course_id');		$this->db->join('tbl_stream','tbl_stream.id = tbl_student.stream_id');		$this->db->join('tbl_session','tbl_session.id = tbl_student.session_id');		$this->db->join('cities','cities.id = tbl_student.city','left');		$this->db->join('states','states.id = tbl_student.state','left');		$this->db->join('countries','countries.id = tbl_student.country','left');		$result = $this->db->get('tbl_student');		$result = $result->row();		$result->photo_path = $this->Digitalocean_model->get_photo('images/profile_pic/'.$result->photo);		$result->signature_path = $this->Digitalocean_model->get_photo('images/signature/'.$result->signature);		$result->identity_softcopy_path = $this->Digitalocean_model->get_photo('images/student_identity_softcopy/'.$result->identity_softcopy);		return $result;	}	public function get_single_student_verified(){		$this->db->where('is_deleted','0');		$this->db->where('student_type','0');		$this->db->where('student_id',$this->uri->segment(2));		$result = $this->db->get('tbl_document_verification_remark');		return $result->row();	}	public function get_single_blended_student_verified(){		$this->db->where('is_deleted','0'); 		$this->db->where('student_id',$this->uri->segment(2));		$result = $this->db->get('tbl_separate_document_verification_remark');		return $result->row();	}	public function set_re_verification(){		$data = array(			'doc_verify' => '0'		); 		$this->db->where('id',$this->input->post('student_id'));		$this->db->update('tbl_student',$data);		return true;	}	public function set_blended_re_verification(){		$data = array(			'doc_verified' => '0'		); 		$this->db->where('id',$this->input->post('student_id'));		$this->db->update('tbl_separate_student',$data);		return true;	}		public function get_single_blended_student(){ 		$this->db->select('tbl_separate_student.*,tbl_course.print_name,tbl_stream.stream_name,tbl_session.session_name');		$this->db->where('tbl_separate_student.is_deleted','0');   		$this->db->where('tbl_separate_student.id',$this->uri->segment(2));		$this->db->join('tbl_course','tbl_course.id = tbl_separate_student.course_id');		$this->db->join('tbl_stream','tbl_stream.id = tbl_separate_student.stream_id');		$this->db->join('tbl_session','tbl_session.id = tbl_separate_student.session_id'); 		$result = $this->db->get('tbl_separate_student');		$result = $result->row();		if(!empty($result)){			if($result->identity_softcopy !=""){				$result->identity_softcopy_path = $this->Digitalocean_model->get_photo('images/separate_student/'.$result->identity_softcopy);			}else{				$result->identity_softcopy_path = "";			} 			if($result->document !=""){				$result->document_path = $this->Digitalocean_model->get_photo('images/separate_student/'.$result->document);			}else{				$result->document_path = "";			} 		}else{			$result = array();		}		return $result;	}}