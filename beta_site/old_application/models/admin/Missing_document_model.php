<?php if (! defined('BASEPATH')) exit('No direct script access allowed');class Missing_document_model extends CI_Model{	public function get_missing_document_regular_enrolled()	{		$this->db->select('tbl_student.*, tbl_center.center_name,tbl_course.course_name,tbl_stream.stream_name');		$this->db->from('tbl_student');		$this->db->join('tbl_center', 'tbl_center.id = tbl_student.center_id');		$this->db->join('tbl_course', 'tbl_course.id = tbl_student.course_id');		$this->db->join('tbl_stream', 'tbl_stream.id = tbl_student.stream_id');		$this->db->where('tbl_student.is_deleted', '0');		$this->db->where('tbl_student.admission_status !=', '0');		// Group OR conditions		$this->db->group_start();		$this->db->or_where('tbl_student.photo', '');		$this->db->or_where('tbl_student.signature', '');		$this->db->or_where('tbl_student.identity_softcopy', '');		$this->db->group_end();		$result = $this->db->get()->result();		return $result;	}	public function get_missing_document_regular()	{		$this->db->select('tbl_student.*, tbl_center.center_name,tbl_course.course_name,tbl_stream.stream_name');		$this->db->from('tbl_student');		$this->db->join('tbl_center', 'tbl_center.id = tbl_student.center_id');		$this->db->join('tbl_course', 'tbl_course.id = tbl_student.course_id');		$this->db->join('tbl_stream', 'tbl_stream.id = tbl_student.stream_id');		$this->db->where('tbl_student.is_deleted', '0');		$this->db->where('tbl_student.admission_status', '0');		// Group OR conditions		$this->db->group_start();		$this->db->or_where('tbl_student.photo', '');		$this->db->or_where('tbl_student.signature', '');		$this->db->or_where('tbl_student.identity_softcopy', '');		$this->db->group_end();		$result = $this->db->get()->result();		return $result;	}	public function get_missing_document_blended_enrolled()	{		$this->db->select('tbl_separate_student.*, tbl_center.center_name');		$this->db->from('tbl_separate_student');		$this->db->join('tbl_center', 'tbl_center.id = tbl_separate_student.center_id');		$this->db->where('tbl_separate_student.is_deleted', '0');		$this->db->where('tbl_separate_student.enrollment_number !=', '');		// Group the OR conditions together		$this->db->group_start();		$this->db->or_where('tbl_separate_student.photo', '');		$this->db->or_where('tbl_separate_student.identity_softcopy', '');		$this->db->group_end();		$result = $this->db->get()->result();		return $result;	}	public function get_missing_document_blended_enrolled_qualification()	{		$this->db->select('tbl_separate_student.*, tbl_center.center_name');		$this->db->from('tbl_separate_student');		$this->db->join('tbl_center', 'tbl_center.id = tbl_separate_student.center_id');		$this->db->where('tbl_separate_student.is_deleted', '0');		$this->db->where('tbl_separate_student.enrollment_number !=', '');		$this->db->where('tbl_separate_student.document', '');		$result = $this->db->get()->result();		return $result;	}	public function get_missing_document_blended()	{		$this->db->select('tbl_separate_student.*, tbl_center.center_name');		$this->db->from('tbl_separate_student');		$this->db->join('tbl_center', 'tbl_center.id = tbl_separate_student.center_id');		$this->db->where('tbl_separate_student.is_deleted', '0');		$this->db->where('tbl_separate_student.enrollment_number', '');		// Group the OR conditions together		$this->db->group_start();		$this->db->or_where('tbl_separate_student.photo', '');		$this->db->or_where('tbl_separate_student.document', '');		$this->db->or_where('tbl_separate_student.identity_softcopy', '');		$this->db->group_end();		$result = $this->db->get()->result();		return $result;	}	public function upload_photo_regular($photo)	{		// echo "<pre>sdf";		// print_r($photo);		// exit;		$data = array(			'photo' => $photo		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student', $data);		return true;	}	public function upload_identity_softcopy_regular($photo)	{		$data = array(			'identity_softcopy' => $photo		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student', $data);		return true;	}	public function upload_signature_regular($photo)	{		$data = array(			'signature' => $photo		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student', $data);		return true;	}	public function upload_document_blended($document)	{		$data = array(			'document' => $document		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_separate_student', $data);		return true;	}	public function upload_photo_blended($photo)	{		$data = array(			'photo' => $photo		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_separate_student', $data);		return true;	}	public function upload_identity_softcopy_blended($identity_softcopy)	{		$data = array(			'identity_softcopy' => $identity_softcopy		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_separate_student', $data);		return true;	}	public function get_missing_document_qualification()	{		$this->db->select('tbl_student_qualification.*, tbl_center.center_name, tbl_student.course_type,tbl_student.student_name, tbl_student.enrollment_number, tbl_student.enrollment_date,tbl_course.course_name,tbl_stream.stream_name');		$this->db->where('tbl_student.admission_status', '1');		$this->db->where('tbl_student.enrollment_number !=', '');		$this->db->group_start();		$this->db->group_start();		$this->db->where('tbl_student_qualification.secondary_year !=', '');		$this->db->where('tbl_student_qualification.secondary_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.sr_secondary_year !=', '');		$this->db->where('tbl_student_qualification.sr_secondary_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.graduation_year !=', '');		$this->db->where('tbl_student_qualification.graduation_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.post_graduation_year !=', '');		$this->db->where('tbl_student_qualification.post_graduation_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.other_qualification_year !=', '');		$this->db->where('tbl_student_qualification.other_qualification_marksheet', '');		$this->db->group_end();		$this->db->group_end();		$this->db->join('tbl_student', 'tbl_student.id = tbl_student_qualification.student_id');		$this->db->join('tbl_center', 'tbl_center.id = tbl_student.center_id');		$this->db->join('tbl_course', 'tbl_course.id = tbl_student.course_id');		$this->db->join('tbl_stream', 'tbl_stream.id = tbl_student.stream_id');		$this->db->group_by('tbl_student_qualification.student_id');		$result = $this->db->get('tbl_student_qualification');		$result = $result->result();		$main_arr = array();		if (!empty($result)) {			foreach ($result as $result_arr) {				if ($result_arr->course_type == "7") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "6") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "5") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "5") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "4") {					if ($result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "3") {					if ($result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "2") {					if ($result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "1") {					if ($result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				}			}		}		return $main_arr;	}	public function get_missing_document_qualification_pending()	{		$this->db->select('tbl_student_qualification.*, tbl_center.center_name, tbl_student.student_name, tbl_student.enrollment_number, tbl_student.enrollment_date,tbl_course.course_name,tbl_stream.stream_name');		$this->db->where('tbl_student.admission_status', '0');		$this->db->where('tbl_student.enrollment_number', '');		$this->db->group_start();		$this->db->group_start();		$this->db->where('tbl_student_qualification.secondary_year !=', '');		$this->db->where('tbl_student_qualification.secondary_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.sr_secondary_year !=', '');		$this->db->where('tbl_student_qualification.sr_secondary_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.graduation_year !=', '');		$this->db->where('tbl_student_qualification.graduation_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.post_graduation_year !=', '');		$this->db->where('tbl_student_qualification.post_graduation_marksheet', '');		$this->db->group_end();		$this->db->or_group_start();		$this->db->where('tbl_student_qualification.other_qualification_year !=', '');		$this->db->where('tbl_student_qualification.other_qualification_marksheet', '');		$this->db->group_end();		$this->db->group_end();		$this->db->join('tbl_student', 'tbl_student.id = tbl_student_qualification.student_id');		$this->db->join('tbl_center', 'tbl_center.id = tbl_student.center_id');		$this->db->join('tbl_course', 'tbl_course.id = tbl_student.course_id');		$this->db->join('tbl_stream', 'tbl_stream.id = tbl_student.stream_id');		$this->db->group_by('tbl_student_qualification.student_id');		$result = $this->db->get('tbl_student_qualification');		$result = $result->result();		$main_arr = array();		if (!empty($result)) {			foreach ($result as $result_arr) {				if ($result_arr->course_type == "7") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "6") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "5") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "5") {					if ($result_arr->post_graduation_marksheet == "" || $result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "4") {					if ($result_arr->graduation_marksheet == "" || $result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "3") {					if ($result_arr->sr_secondary_marksheet == "" || $result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "2") {					if ($result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				} else if ($result_arr->course_type == "1") {					if ($result_arr->secondary_marksheet == "") {						$main_arr[] = $result_arr;					}				}			}		}		return $main_arr;	}	public function upload_secondary_marksheet($secondary_marksheet)	{		$data = array(			'secondary_marksheet' => $secondary_marksheet		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student_qualification', $data);		return true;	}	public function upload_sr_secondary_marksheet_marksheet($sr_secondary_marksheet)	{		$data = array(			'sr_secondary_marksheet' => $sr_secondary_marksheet		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student_qualification', $data);		return true;	}	public function upload_graduation_marksheet_marksheet($graduation_marksheet)	{		$data = array(			'graduation_marksheet' => $graduation_marksheet		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student_qualification', $data);		return true;	}	public function upload_post_graduation_marksheet($post_graduation_marksheet)	{		$data = array(			'post_graduation_marksheet' => $post_graduation_marksheet		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student_qualification', $data);		return true;	}	public function upload_other_qualification_marksheet($other_qualification_marksheet)	{		$data = array(			'other_qualification_marksheet' => $other_qualification_marksheet		);		$this->db->where('id', $this->input->post('id'));		$this->db->update('tbl_student_qualification', $data);		return true;	}}